parameters:
      language: $(TARGET_SDK)
      transport: $(test_transport)
      tag: $(tag)

steps:

- script: $(Horton.FrameworkRoot)/scripts/ci-run-single-scenario.sh ${{ parameters.tag }} ${{ parameters.transport }} ${{ parameters.language }} testgroup_edgehub_fault_injection
  displayName: 'run tests -fi ${{ parameters.language }} ${{ parameters.transport }}'
  condition: succeededOrFailed()
  env:
    TARGET_SDK: $(TARGET_SDK)
    CHANGESET: $(CHANGESET)
    TARGET_BRANCH: $(TARGET_BRANCH)
    REPO: $(REPO)
    IOTHUB_E2E_CONNECTION_STRING: $(IOTHUB-E2E-CONNECTION-STRING)
    IOTHUB_E2E_REPO_ADDRESS: $(IOTHUB-E2E-REPO-ADDRESS)
    IOTHUB_E2E_REPO_USER: $(IOTHUB-E2E-REPO-USER)
    IOTHUB_E2E_REPO_PASSWORD: $(IOTHUB-E2E-REPO-PASSWORD)
    IOTEDGE_DEBUG_LOG: $(IOTEDGE_DEBUG_LOG)

