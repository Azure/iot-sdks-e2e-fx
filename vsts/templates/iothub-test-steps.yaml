parameters:
      language: $(TARGET_SDK)
      transport: $(test_transport)

steps:

- script: scripts/ci-run-single-scenario.sh iothub ${{ parameters.transport }} ${{ parameters.language }} testgroup_iothub_module_client --direct-to-iothub
  displayName: 'run tests iothub ${{ parameters.language }} ${{ parameters.transport }}'
  env:
    TARGET_SDK: $(TARGET_SDK)
    CHANGESET: $(CHANGESET)
    TARGET_BRANCH: $(TARGET_BRANCH)
    REPO: $(REPO)
    IOTHUB_E2E_CONNECTION_STRING: $(IOTHUB-E2E-CONNECTION-STRING)
    IOTHUB_E2E_REPO_ADDRESS: $(IOTHUB-E2E-REPO-ADDRESS)
    IOTHUB_E2E_REPO_USER: $(IOTHUB-E2E-REPO-USER)
    IOTHUB_E2E_REPO_PASSWORD: $(IOTHUB-E2E-REPO-PASSWORD)
    IOTEDGE_DEBUG_LOG: $(IOTEDGE_DEBUG_LOG)

